(function(){"use strict";var t={5089:function(t,n,e){var a=e(5130),o=e(6768),c=e(4232),i=e(782),s=e(144);const l=/^\+7\d{10}$/,u=/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,}$/,r={class:"contact-form"},d=["pattern"],p=["pattern"],m={class:"contact-form__button",type:"submit"},v={key:0,class:"contact-form__notification"};var f=(0,o.pM)({__name:"ContactForm",setup(t){const n=(0,i.Pj)(),e=(0,s.KR)({id:"",name:"",phone:"+7",email:""}),f=l.source,_=u.source,h=(0,s.KR)(!1),C=(0,o.EW)((()=>!!n.state.editingContact));function g(){const t=n.getters.getContactByPhone(e.value.phone);C.value?(n.commit("updateContact",e.value),n.commit("setEditingContact",null),b()):t?(h.value=!0,setTimeout((()=>h.value=!1),3e3)):(n.commit("addContact",{...e.value,id:e.value.phone}),b())}function b(){e.value={id:"",name:"",phone:"+7",email:""},n.commit("setEditingContact",null)}return(0,o.wB)((()=>n.state.editingContact),(t=>{t?e.value={...t}:b()}),{immediate:!0}),(t,n)=>((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("h2",null,(0,c.v_)(C.value?"Редактировать контакт":"Добавить контакт"),1),(0,o.Lk)("form",{onSubmit:(0,a.D$)(g,["prevent"])},[(0,o.Lk)("label",null,[n[3]||(n[3]=(0,o.eW)(" Имя: ")),(0,o.bo)((0,o.Lk)("input",{class:"contact-form__input","onUpdate:modelValue":n[0]||(n[0]=t=>e.value.name=t),required:"",placeholder:"Name"},null,512),[[a.Jo,e.value.name]])]),(0,o.Lk)("label",null,[n[4]||(n[4]=(0,o.eW)(" Телефон: ")),(0,o.bo)((0,o.Lk)("input",{class:"contact-form__input","onUpdate:modelValue":n[1]||(n[1]=t=>e.value.phone=t),required:"",pattern:(0,s.R1)(f),placeholder:"+79998881122",title:"Введите телефон в формате +79998881122"},null,8,d),[[a.Jo,e.value.phone]])]),(0,o.Lk)("label",null,[n[5]||(n[5]=(0,o.eW)(" Email: ")),(0,o.bo)((0,o.Lk)("input",{class:"contact-form__input","onUpdate:modelValue":n[2]||(n[2]=t=>e.value.email=t),required:"",pattern:(0,s.R1)(_),placeholder:"example@domain.com",title:"Введите email в формате example@domain.com"},null,8,p),[[a.Jo,e.value.email]])]),(0,o.Lk)("button",m,(0,c.v_)(C.value?"Сохранить":"Добавить"),1)],32),h.value?((0,o.uX)(),(0,o.CE)("div",v," Контакт с таким номером уже добавлен. ")):(0,o.Q3)("",!0)]))}}),_=e(1241);const h=(0,_.A)(f,[["__scopeId","data-v-05373f6c"]]);var C=h;const g={class:"contact-item"},b={key:0,class:"contact-item__editing-overlay"},k={key:1,class:"contact-item__info"};var L=(0,o.pM)({__name:"ContactItem",props:{contact:{}},setup(t){const n=t,e=(0,i.Pj)(),s=(0,o.EW)((()=>e.state.editingContact?.id===n.contact.id));function l(){e.dispatch("editContact",n.contact)}function u(){e.dispatch("deleteContact",n.contact.id)}return(t,n)=>((0,o.uX)(),(0,o.CE)("li",g,[(0,o.bF)(a.eB,{name:"fade"},{default:(0,o.k6)((()=>[s.value?((0,o.uX)(),(0,o.CE)("div",b,n[0]||(n[0]=[(0,o.Lk)("span",{class:"material-icons contact-item__edit-icon"},"edit",-1)]))):((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("p",null,(0,c.v_)(t.contact.name),1),(0,o.Lk)("p",null,(0,c.v_)(t.contact.phone),1),(0,o.Lk)("p",null,(0,c.v_)(t.contact.email),1)]))])),_:1}),(0,o.Lk)("div",{class:"contact-item__actions"},[(0,o.Lk)("button",{onClick:l,class:"contact-item__icon-button"},n[1]||(n[1]=[(0,o.Lk)("span",{class:"material-icons"},"edit",-1)])),(0,o.Lk)("button",{onClick:u,class:"contact-item__icon-button"},n[2]||(n[2]=[(0,o.Lk)("span",{class:"material-icons"},"delete",-1)]))])]))}});const y=(0,_.A)(L,[["__scopeId","data-v-5c3e4d28"]]);var E=y;const w={class:"search-bar"};var I=(0,o.pM)({__name:"SearchBar",setup(t){const n=(0,i.Pj)(),e=(0,s.KR)("");function c(){n.commit("setSearchQuery",e.value)}return(t,n)=>((0,o.uX)(),(0,o.CE)("div",w,[(0,o.bo)((0,o.Lk)("input",{class:"search-bar__input","onUpdate:modelValue":n[0]||(n[0]=t=>e.value=t),onInput:c,placeholder:"Поиск контактов"},null,544),[[a.Jo,e.value]])]))}});const O=(0,_.A)(I,[["__scopeId","data-v-2022c184"]]);var S=O;const j={class:"contact-list"},P={class:"contact-list__contacts"},A={key:0,class:"contact-list__pagination"},X=["disabled"],W={class:"contact-list__page-info"},F=["disabled"],J=3;var x=(0,o.pM)({__name:"ContactList",setup(t){const n=(0,i.Pj)(),e=(0,s.KR)(1),a=(0,o.EW)((()=>n.getters.filteredContacts)),l=(0,o.EW)((()=>Math.ceil(a.value.length/J))),u=(0,o.EW)((()=>{const t=(e.value-1)*J,n=t+J;return a.value.slice(t,n)}));function r(){e.value>1&&e.value--}function d(){e.value<l.value&&e.value++}function p(t){n.commit("setSearchQuery",t),e.value=1}function m(t){n.commit("setEditingContact",t)}function v(t){n.commit("deleteContact",t)}return(t,n)=>((0,o.uX)(),(0,o.CE)("div",j,[n[0]||(n[0]=(0,o.Lk)("h2",{class:"contact-list__title"},"Список контактов",-1)),(0,o.bF)(S,{onSearch:p}),(0,o.Lk)("ul",P,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.value,(t=>((0,o.uX)(),(0,o.Wv)(E,{key:t.id,contact:t,onEdit:m,onDelete:v},null,8,["contact"])))),128))]),l.value>1?((0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("button",{onClick:r,disabled:1===e.value,class:"contact-list__button"}," Назад ",8,X),(0,o.Lk)("span",W,(0,c.v_)(e.value)+" из "+(0,c.v_)(l.value),1),(0,o.Lk)("button",{onClick:d,disabled:e.value===l.value,class:"contact-list__button"}," Вперед ",8,F)])):(0,o.Q3)("",!0)]))}});const Q=(0,_.A)(x,[["__scopeId","data-v-5562d1cd"]]);var M=Q;const N={id:"app"},R=["disabled"];var B=(0,o.pM)({__name:"App",setup(t){const n=(0,i.Pj)(),e=(0,o.EW)((()=>n.getters.isLoading));function a(){n.dispatch("loadContactsFromAPI")}return(t,n)=>((0,o.uX)(),(0,o.CE)("div",N,[(0,o.bF)(C),(0,o.bF)(M),(0,o.Lk)("button",{onClick:a,class:"app__button app__button--load",disabled:e.value},(0,c.v_)(e.value?"Загрузка...":"Загрузить контакты из API"),9,R)]))}});const K=(0,_.A)(B,[["__scopeId","data-v-e730e216"]]);var T=K;e(4114),e(8992),e(4520),e(2577),e(1454);const $=(0,i.y$)({state:{contacts:JSON.parse(localStorage.getItem("contacts")||"[]"),searchQuery:"",editingContact:null,isLoading:!1},mutations:{addContact(t,n){t.contacts.push(n),localStorage.setItem("contacts",JSON.stringify(t.contacts))},deleteContact(t,n){t.contacts=t.contacts.filter((t=>t.id!==n)),localStorage.setItem("contacts",JSON.stringify(t.contacts))},updateContact(t,n){const e=t.contacts.findIndex((t=>t.id===n.id));-1!==e&&(t.contacts[e]=n,localStorage.setItem("contacts",JSON.stringify(t.contacts)))},setEditingContact(t,n){t.editingContact=n},setSearchQuery(t,n){t.searchQuery=n},setContacts(t,n){t.contacts=n,localStorage.setItem("contacts",JSON.stringify(t.contacts))},setLoading(t,n){t.isLoading=n}},actions:{async loadContactsFromAPI({commit:t}){t("setLoading",!0);try{const n=await fetch("https://jsonplaceholder.typicode.com/users");if(!n.ok)throw new Error(`Ошибка HTTP: ${n.status}`);const e=await n.json(),a=e.map((t=>({id:t.phone,name:t.name,phone:t.phone,email:t.email})));t("setContacts",a)}catch(n){console.error("Ошибка при загрузке данных:",n)}finally{t("setLoading",!1)}},editContact({commit:t},n){t("setEditingContact",n)},deleteContact({commit:t},n){t("deleteContact",n)}},getters:{getContacts:t=>t.contacts,isLoading:t=>t.isLoading,filteredContacts:t=>{const n=t.searchQuery.trim().toLowerCase();return t.contacts.filter((t=>{const e=t.name.toLowerCase().includes(n),a=t.email.toLowerCase().includes(n),o=t.phone.toLowerCase().includes(n);return e||a||o}))},getContactByPhone:t=>n=>t.contacts.find((t=>t.phone===n)),getEditingContact:t=>t.editingContact}});var U=$;const V=(0,a.Ef)(T);V.use(U),V.mount("#app")}},n={};function e(a){var o=n[a];if(void 0!==o)return o.exports;var c=n[a]={exports:{}};return t[a].call(c.exports,c,c.exports,e),c.exports}e.m=t,function(){var t=[];e.O=function(n,a,o,c){if(!a){var i=1/0;for(r=0;r<t.length;r++){a=t[r][0],o=t[r][1],c=t[r][2];for(var s=!0,l=0;l<a.length;l++)(!1&c||i>=c)&&Object.keys(e.O).every((function(t){return e.O[t](a[l])}))?a.splice(l--,1):(s=!1,c<i&&(i=c));if(s){t.splice(r--,1);var u=o();void 0!==u&&(n=u)}}return n}c=c||0;for(var r=t.length;r>0&&t[r-1][2]>c;r--)t[r]=t[r-1];t[r]=[a,o,c]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){var t={524:0};e.O.j=function(n){return 0===t[n]};var n=function(n,a){var o,c,i=a[0],s=a[1],l=a[2],u=0;if(i.some((function(n){return 0!==t[n]}))){for(o in s)e.o(s,o)&&(e.m[o]=s[o]);if(l)var r=l(e)}for(n&&n(a);u<i.length;u++)c=i[u],e.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return e.O(r)},a=self["webpackChunkcontact_management"]=self["webpackChunkcontact_management"]||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var a=e.O(void 0,[504],(function(){return e(5089)}));a=e.O(a)})();
//# sourceMappingURL=app.3012517b.js.map