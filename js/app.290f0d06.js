(function(){"use strict";var t={5887:function(t,e,n){var a=n(5130),o=n(6768),c=n(4232),i=n(782),s=n(144);const l=/^\+7\d{10}$/,u=/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,}$/,r={class:"contact-form"},d=["pattern"],p=["pattern"],m={class:"contact-form__button",type:"submit"},v={key:0,class:"contact-form__notification"};var f=(0,o.pM)({__name:"ContactForm",setup(t){const e=(0,i.Pj)(),n=(0,s.KR)({id:"",name:"",phone:"+7",email:""}),f=l.source,_=u.source,h=(0,s.KR)(!1),C=(0,o.EW)((()=>!!e.state.editingContact));function g(){const t=e.getters.getContactByPhone(n.value.phone);C.value?(e.commit("updateContact",n.value),e.commit("setEditingContact",null),b()):t?(h.value=!0,setTimeout((()=>h.value=!1),3e3)):(e.commit("addContact",{...n.value,id:n.value.phone}),b())}function b(){n.value={id:"",name:"",phone:"+7",email:""},e.commit("setEditingContact",null)}return(0,o.wB)((()=>e.state.editingContact),(t=>{t?n.value={...t}:b()}),{immediate:!0}),(t,e)=>((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("h2",null,(0,c.v_)(C.value?"Редактировать контакт":"Добавить контакт"),1),(0,o.Lk)("form",{onSubmit:(0,a.D$)(g,["prevent"])},[(0,o.Lk)("label",null,[e[3]||(e[3]=(0,o.eW)(" Имя: ")),(0,o.bo)((0,o.Lk)("input",{class:"contact-form__input","onUpdate:modelValue":e[0]||(e[0]=t=>n.value.name=t),required:"",placeholder:"Name"},null,512),[[a.Jo,n.value.name]])]),(0,o.Lk)("label",null,[e[4]||(e[4]=(0,o.eW)(" Телефон: ")),(0,o.bo)((0,o.Lk)("input",{class:"contact-form__input","onUpdate:modelValue":e[1]||(e[1]=t=>n.value.phone=t),required:"",pattern:(0,s.R1)(f),placeholder:"+79998881122",title:"Введите телефон в формате +79998881122"},null,8,d),[[a.Jo,n.value.phone]])]),(0,o.Lk)("label",null,[e[5]||(e[5]=(0,o.eW)(" Email: ")),(0,o.bo)((0,o.Lk)("input",{class:"contact-form__input","onUpdate:modelValue":e[2]||(e[2]=t=>n.value.email=t),required:"",pattern:(0,s.R1)(_),placeholder:"example@domain.com",title:"Введите email в формате example@domain.com"},null,8,p),[[a.Jo,n.value.email]])]),(0,o.Lk)("button",m,(0,c.v_)(C.value?"Сохранить":"Добавить"),1)],32),h.value?((0,o.uX)(),(0,o.CE)("div",v," Контакт с таким номером уже добавлен. ")):(0,o.Q3)("",!0)]))}}),_=n(1241);const h=(0,_.A)(f,[["__scopeId","data-v-05373f6c"]]);var C=h;const g={class:"contact-item"},b={key:0,class:"contact-item__editing-overlay"},k={key:1,class:"contact-item__info"};var y=(0,o.pM)({__name:"ContactItem",props:{contact:{}},setup(t){const e=t,n=(0,i.Pj)(),s=(0,o.EW)((()=>n.state.editingContact?.id===e.contact.id));function l(){n.dispatch("editContact",e.contact)}function u(){n.dispatch("deleteContact",e.contact.id)}return(t,e)=>((0,o.uX)(),(0,o.CE)("li",g,[(0,o.bF)(a.eB,{name:"fade"},{default:(0,o.k6)((()=>[s.value?((0,o.uX)(),(0,o.CE)("div",b,e[0]||(e[0]=[(0,o.Lk)("span",{class:"material-icons contact-item__edit-icon"},"edit",-1)]))):((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("p",null,(0,c.v_)(t.contact.name),1),(0,o.Lk)("p",null,(0,c.v_)(t.contact.phone),1),(0,o.Lk)("p",null,(0,c.v_)(t.contact.email),1)]))])),_:1}),(0,o.Lk)("div",{class:"contact-item__actions"},[(0,o.Lk)("button",{onClick:l,class:"contact-item__icon-button"},e[1]||(e[1]=[(0,o.Lk)("span",{class:"material-icons"},"edit",-1)])),(0,o.Lk)("button",{onClick:u,class:"contact-item__icon-button"},e[2]||(e[2]=[(0,o.Lk)("span",{class:"material-icons"},"delete",-1)]))])]))}});const L=(0,_.A)(y,[["__scopeId","data-v-5c3e4d28"]]);var E=L;const w={class:"search-bar"};var I=(0,o.pM)({__name:"SearchBar",setup(t){const e=(0,i.Pj)(),n=(0,s.KR)("");function c(){e.commit("setSearchQuery",n.value)}return(t,e)=>((0,o.uX)(),(0,o.CE)("div",w,[(0,o.bo)((0,o.Lk)("input",{class:"search-bar__input","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),onInput:c,placeholder:"Поиск контактов"},null,544),[[a.Jo,n.value]])]))}});const O=(0,_.A)(I,[["__scopeId","data-v-415e2d71"]]);var S=O;const X={class:"contact-list"},j={key:0},P={key:1,class:"contact-list__contacts"},A={key:2,class:"contact-list__empty"},Q={key:3,class:"contact-list__pagination"},W=["disabled"],F={class:"contact-list__page-info"},J=["disabled"],x=3;var R=(0,o.pM)({__name:"ContactList",setup(t){const e=(0,i.Pj)(),n=(0,s.KR)(1),a=(0,o.EW)((()=>e.getters.filteredContacts)),l=(0,o.EW)((()=>Math.ceil(a.value.length/x))),u=(0,o.EW)((()=>{const t=(n.value-1)*x,e=t+x;return a.value.slice(t,e)}));function r(){n.value>1&&n.value--}function d(){n.value<l.value&&n.value++}function p(t){e.commit("setSearchQuery",t),n.value=1}function m(t){e.commit("setEditingContact",t)}function v(t){e.commit("deleteContact",t)}return(t,a)=>((0,o.uX)(),(0,o.CE)("div",X,[(0,s.R1)(e).state.contacts.length>0?((0,o.uX)(),(0,o.CE)("div",j,[a[0]||(a[0]=(0,o.Lk)("h2",{class:"contact-list__title"},"Список контактов",-1)),(0,o.bF)(S,{onSearch:p})])):(0,o.Q3)("",!0),u.value.length>0?((0,o.uX)(),(0,o.CE)("ul",P,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.value,(t=>((0,o.uX)(),(0,o.Wv)(E,{key:t.id,contact:t,onEdit:m,onDelete:v},null,8,["contact"])))),128))])):(0,s.R1)(e).state.searchQuery?((0,o.uX)(),(0,o.CE)("p",A," Контакты не найдены ")):(0,o.Q3)("",!0),l.value>1?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("button",{onClick:r,disabled:1===n.value,class:"contact-list__button"}," Назад ",8,W),(0,o.Lk)("span",F,(0,c.v_)(n.value)+" из "+(0,c.v_)(l.value),1),(0,o.Lk)("button",{onClick:d,disabled:n.value===l.value,class:"contact-list__button"}," Вперед ",8,J)])):(0,o.Q3)("",!0)]))}});const M=(0,_.A)(R,[["__scopeId","data-v-aaacd4d6"]]);var N=M;const B={id:"app"},K=["disabled"];var T=(0,o.pM)({__name:"App",setup(t){const e=(0,i.Pj)(),n=(0,o.EW)((()=>e.getters.isLoading));function a(){e.dispatch("loadContactsFromAPI")}return(t,e)=>((0,o.uX)(),(0,o.CE)("div",B,[(0,o.bF)(C),(0,o.bF)(N),(0,o.Lk)("button",{onClick:a,class:"app__button app__button--load",disabled:n.value},(0,c.v_)(n.value?"Загрузка...":"Загрузить контакты из API"),9,K)]))}});const $=(0,_.A)(T,[["__scopeId","data-v-e730e216"]]);var U=$;n(4114),n(8992),n(4520),n(2577),n(1454);const V=(0,i.y$)({state:{contacts:JSON.parse(localStorage.getItem("contacts")||"[]"),searchQuery:"",editingContact:null,isLoading:!1},mutations:{addContact(t,e){t.contacts.push(e),localStorage.setItem("contacts",JSON.stringify(t.contacts))},deleteContact(t,e){t.contacts=t.contacts.filter((t=>t.id!==e)),localStorage.setItem("contacts",JSON.stringify(t.contacts))},updateContact(t,e){const n=t.contacts.findIndex((t=>t.id===e.id));-1!==n&&(t.contacts[n]=e,localStorage.setItem("contacts",JSON.stringify(t.contacts)))},setEditingContact(t,e){t.editingContact=e},setSearchQuery(t,e){t.searchQuery=e},setContacts(t,e){t.contacts=e,localStorage.setItem("contacts",JSON.stringify(t.contacts))},setLoading(t,e){t.isLoading=e}},actions:{async loadContactsFromAPI({commit:t}){t("setLoading",!0);try{const e=await fetch("https://jsonplaceholder.typicode.com/users");if(!e.ok)throw new Error(`Ошибка HTTP: ${e.status}`);const n=await e.json(),a=n.map((t=>({id:t.phone,name:t.name,phone:t.phone,email:t.email})));t("setContacts",a)}catch(e){console.error("Ошибка при загрузке данных:",e)}finally{t("setLoading",!1)}},editContact({commit:t},e){t("setEditingContact",e)},deleteContact({commit:t},e){t("deleteContact",e)}},getters:{getContacts:t=>t.contacts,isLoading:t=>t.isLoading,filteredContacts:t=>{const e=t.searchQuery.trim().toLowerCase();return t.contacts.filter((t=>{const n=t.name.toLowerCase().includes(e),a=t.email.toLowerCase().includes(e),o=t.phone.toLowerCase().includes(e);return n||a||o}))},getContactByPhone:t=>e=>t.contacts.find((t=>t.phone===e)),getEditingContact:t=>t.editingContact}});var q=V;const z=(0,a.Ef)(U);z.use(q),z.mount("#app")}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var c=e[a]={exports:{}};return t[a].call(c.exports,c,c.exports,n),c.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,c){if(!a){var i=1/0;for(r=0;r<t.length;r++){a=t[r][0],o=t[r][1],c=t[r][2];for(var s=!0,l=0;l<a.length;l++)(!1&c||i>=c)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(s=!1,c<i&&(i=c));if(s){t.splice(r--,1);var u=o();void 0!==u&&(e=u)}}return e}c=c||0;for(var r=t.length;r>0&&t[r-1][2]>c;r--)t[r]=t[r-1];t[r]=[a,o,c]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,c,i=a[0],s=a[1],l=a[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var r=l(n)}for(e&&e(a);u<i.length;u++)c=i[u],n.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return n.O(r)},a=self["webpackChunkcontact_management"]=self["webpackChunkcontact_management"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(5887)}));a=n.O(a)})();
//# sourceMappingURL=app.290f0d06.js.map